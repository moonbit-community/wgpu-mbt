{
  "import": [],
  "native-stub": [
    "wgpu_native_prebuild.c",
    "wgpu_dyn.c",
    "wgpu_stub_core.c",
    "wgpu_stub_surface.c",
    "wgpu_stub_extras.c",
    "wgpu_stub_helpers_sync.c",
    "wgpu_stub_descs_pipelines.c",
    "wgpu_stub_map.c"
  ],
  "targets": {
    "raw.mbt": [
      "native"
    ]
  },
  "pre-build": [
    {
      "input": [
        "moon.pkg.json"
      ],
      "output": [
        "wgpu_native_prebuild.c"
      ],
      "command": "sh -c 'OUT=\"$output\"\nROOT=\"$PWD\"\nwhile [ \"$ROOT\" != \"/\" ] && [ ! -f \"$ROOT/moon.mod.json\" ]; do\n  ROOT=$(dirname \"$ROOT\")\ndone\nif [ ! -f \"$ROOT/moon.mod.json\" ]; then\n  echo \"wgpu-mbt: failed to locate workspace root (moon.mod.json)\" >&2\n  exit 1\nfi\n\nMANIFEST=\"$ROOT/vendor/wgpu-native/Cargo.toml\"\nif [ ! -f \"$MANIFEST\" ]; then\n  MANIFEST=\"$ROOT/.mooncakes/Milky2018/wgpu_mbt/vendor/wgpu-native/Cargo.toml\"\nfi\nif [ ! -f \"$MANIFEST\" ]; then\n  echo \"wgpu-mbt: failed to locate vendored wgpu-native at $ROOT\" >&2\n  exit 1\nfi\n\nCARGO_TARGET_DIR=\"$ROOT/target/wgpu-native\"\n\ncargo build --manifest-path \"$MANIFEST\" --release --no-default-features --features metal,wgsl \\\n  --target-dir \"$CARGO_TARGET_DIR\"\n\nLIB=\"$CARGO_TARGET_DIR/release/libwgpu_native.dylib\"\nif [ ! -f \"$LIB\" ]; then\n  LIB=\"$CARGO_TARGET_DIR/release/libwgpu_native.so\"\nfi\nif [ ! -f \"$LIB\" ]; then\n  LIB=\"$CARGO_TARGET_DIR/release/wgpu_native.dll\"\nfi\nif [ ! -f \"$LIB\" ]; then\n  echo \"wgpu-mbt: expected libwgpu_native output not found under $CARGO_TARGET_DIR/release\" >&2\n  exit 1\nfi\n\nmkdir -p \"$(dirname \"$OUT\")\"\ncat > \"$OUT\" <<\"EOF\"\n// Generated by src/c/moon.pkg.json pre-build.\n// This file exists only to ensure the pre-build runs when wgpu-mbt is a dependency.\n\n#include \"wgpu_stub.h\"\n\n// Keep translation unit non-empty.\nint mbt_wgpu_native_prebuild_ok(void) { return 1; }\nEOF\n'"
    }
  ]
}
