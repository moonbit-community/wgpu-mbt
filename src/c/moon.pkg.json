{
  "import": [],
  "native-stub": [
    "wgpu_stub_core.c",
    "wgpu_stub_surface.c",
    "wgpu_stub_extras.c",
    "wgpu_stub_helpers_sync.c",
    "wgpu_stub_descs_pipelines.c",
    "wgpu_stub_map.c"
  ],
  "targets": {
    "raw.mbt": [
      "native"
    ]
  },
  "pre-build": [
    {
      "input": [
        "wgpu_stub.h"
      ],
      "output": [
        "target/wgpu-native/release/libwgpu_native.a"
      ],
      "command": "ROOT=\"$PWD\"\ncase \"$PWD\" in\n  */.mooncakes/*)\n    ROOT=\"${PWD%%/.mooncakes/*}\"\n    ;;\nesac\n\nMANIFEST=\"\"\n\n# 1) Dependency installed under consumer root `.mooncakes/`.\nif [ -f \"$ROOT/.mooncakes/Milky2018/wgpu_mbt/vendor/wgpu-native/Cargo.toml\" ]; then\n  MANIFEST=\"$ROOT/.mooncakes/Milky2018/wgpu_mbt/vendor/wgpu-native/Cargo.toml\"\nfi\n\n# 2) Dependency staged under consumer `_build/**/.mooncakes/`.\nif [ -z \"$MANIFEST\" ] && [ -d \"$ROOT/_build\" ]; then\n  FOUND=$(find \"$ROOT/_build\" -path '*/.mooncakes/Milky2018/wgpu_mbt/vendor/wgpu-native/Cargo.toml' -print -quit 2>/dev/null || true)\n  if [ -n \"$FOUND\" ] && [ -f \"$FOUND\" ]; then\n    MANIFEST=\"$FOUND\"\n  fi\nfi\n\n# 3) Running from inside the wgpu-mbt repo (e.g. `$PWD` is `src/c`).\nif [ -z \"$MANIFEST\" ] && [ -f \"$PWD/../../vendor/wgpu-native/Cargo.toml\" ]; then\n  MANIFEST=\"$PWD/../../vendor/wgpu-native/Cargo.toml\"\nfi\n\n# 4) Running from repo root.\nif [ -z \"$MANIFEST\" ] && [ -f \"$PWD/vendor/wgpu-native/Cargo.toml\" ]; then\n  MANIFEST=\"$PWD/vendor/wgpu-native/Cargo.toml\"\nfi\n\nif [ -z \"$MANIFEST\" ]; then\n  echo \"wgpu-mbt: failed to locate vendored wgpu-native Cargo.toml\" >&2\n  exit 1\nfi\n\nCARGO_TARGET_DIR=\"$ROOT/target/wgpu-native\" \\\n  cargo build --manifest-path \"$MANIFEST\" --release --no-default-features --features metal,wgsl"
    }
  ],
  "link": {
    "native": {
      "stub-cc-flags": "-Ivendor/wgpu-native/ffi -Ivendor/wgpu-native/ffi/webgpu-headers",
      "cc-link-flags": "-Ltarget/wgpu-native/release -lwgpu_native -framework Metal -framework Foundation -framework QuartzCore -framework CoreGraphics -framework CoreFoundation -framework IOSurface -framework IOKit"
    }
  }
}
