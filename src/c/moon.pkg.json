{
  "import": [],
  "native-stub": [
    "wgpu_native_prebuild.c",
    "wgpu_dyn.c",
    "wgpu_stub_core.c",
    "wgpu_stub_surface.c",
    "wgpu_stub_extras.c",
    "wgpu_stub_helpers_sync.c",
    "wgpu_stub_descs_pipelines.c",
    "wgpu_stub_map.c"
  ],
  "targets": {
    "raw.mbt": [
      "native"
    ]
  },
  "pre-build": [
    {
      "input": [
        "moon.pkg.json"
      ],
      "output": [
        "wgpu_native_stamp.h"
      ],
      "command": "sh -c 'OUT=\"$output\"\nPKG_DIR=$(cd \"$(dirname \"$OUT\")\" && pwd)\nMODULE_ROOT=$(cd \"$PKG_DIR/../..\" && pwd)\nMANIFEST=\"$MODULE_ROOT/vendor/wgpu-native/Cargo.toml\"\nif [ ! -f \"$MANIFEST\" ]; then\n  echo \"wgpu-mbt: failed to locate vendored wgpu-native at $MODULE_ROOT/vendor/wgpu-native\" >&2\n  exit 1\nfi\n\nCARGO_TARGET_DIR=\"$PKG_DIR/target/wgpu-native\"\n\ncargo build --manifest-path \"$MANIFEST\" --release --no-default-features --features metal,wgsl \\\n  --target-dir \"$CARGO_TARGET_DIR\"\n\nLIB=\"$CARGO_TARGET_DIR/release/libwgpu_native.dylib\"\nif [ ! -f \"$LIB\" ]; then\n  LIB=\"$CARGO_TARGET_DIR/release/libwgpu_native.so\"\nfi\nif [ ! -f \"$LIB\" ]; then\n  LIB=\"$CARGO_TARGET_DIR/release/wgpu_native.dll\"\nfi\nif [ ! -f \"$LIB\" ]; then\n  echo \"wgpu-mbt: expected libwgpu_native output not found under $CARGO_TARGET_DIR/release\" >&2\n  exit 1\nfi\n\ncat > \"$OUT\" <<\"EOF\"\n// Generated by `src/c/moon.pkg.json` pre-build.\n// Used by wgpu_dyn.c to dlopen the freshly-built wgpu-native library.\n\n#pragma once\n\n#define MBT_WGPU_NATIVE_LIB_ABSPATH \"$LIB\"\nEOF\n'"
    }
  ]
}
